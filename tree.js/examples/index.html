<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Trabalho Webgl CG - 2017</title>
		<meta charset="utf-8">
		<!-- <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"> -->
		<style>
			body {
				background-color: #111;
				margin: 0px;
			}
			canvas{
				width: 100%;
				height: 100%;
			}
		</style>
	</head>
	<body>
		<script src="/build/three.js"></script>
		<script src="/js/controls/OrbitControls.js"></script>
		<script>

			// Criando a cena
			var scene = new THREE.Scene();

			// Criando uma câmera perspectiva
			var camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 1, 1000);
			camera.position.set(0, 0, 20);

			// Criando Renderer e setando seu tamanho para o mesmo tamanho da janela
			var renderer = new THREE.WebGLRenderer();
			renderer.setSize(window.innerWidth, window.innerHeight);

			// Adicionando controle de órbita
			var orbit = new THREE.OrbitControls( camera, renderer.domElement)

			// Adicionando o renderer canvas ao DOM
			document.body.appendChild(renderer.domElement);

			// Criando luz ambiente
			var light = new THREE.AmbientLight(0x888888);
			scene.add(light);

			// Criando luz direcional para simular o Sol
			var light = new THREE.DirectionalLight(0xfdfcf0, 1);
			light.position.set(20,10,10);
			scene.add(light);

			// Criando geometria e material para os terra
			var earthGeometry = new THREE.SphereGeometry(10, 50, 50);
			var earthMaterial = new THREE.MeshPhongMaterial({
				map: new THREE.ImageUtils.loadTexture("textures/2k_earth_daymap.jpg")});
			var earth = new THREE.Mesh(earthGeometry, earthMaterial);
			scene.add(earth);

			// Criando geometria e material para as nuvens
			// Criação de uma esfera um pouco maior que a da terra para que as nuvens fiquem sobre a terra
			var cloudGeometry = new THREE.SphereGeometry(10.3, 50, 50);
			var cloudMaterial = new THREE.MeshPhongMaterial({
				map: new THREE.ImageUtils.loadTexture("textures/cloud_combined_2048.jpg"),
			  transparent: true,
				opacity: 0.1});
			var clouds = new THREE.Mesh(cloudGeometry, cloudMaterial);
			scene.add(clouds);

			// Adicionando estrelas ao fundo
			var starGeometry = new THREE.SphereGeometry(1000, 50, 50);
			var starMaterial = new THREE.MeshPhongMaterial({
				map: new THREE.ImageUtils.loadTexture("textures/galaxy_starfield.png"),
				side: THREE.DoubleSide,
				shininess: 0
			});
			var starField = new THREE.Mesh(starGeometry, starMaterial);
			scene.add(starField);

			// Implementando a função render
			var render = function (){
				// Adicionando rotação à terra no eixo Y
				earth.rotation.y -= .005;
				clouds.rotation.y -= .003;

				renderer.render(scene, camera);
				requestAnimationFrame(render);
			};

			render();
		</script>
	</body>
</html>
